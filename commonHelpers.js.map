{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nconst BASE_URL = \"https://pixabay.com\";\nconst END_POINT = \"/api/\";\n\n export function getImages(keyUser, keyImage, currentPageNumber) {\n        const params = new URLSearchParams({\n            key: keyUser,\n            q: keyImage,\n            image_type: \"photo\",\n            orientation: 'horizontal',\n          safesearch: 'true',\n          page: `${currentPageNumber}`,\n          per_page: 15,\n        });\n   \n        const url = `${BASE_URL}${END_POINT}?${params}`;\n      return fetch(url)\n        .then(res => {\n          if (!res.ok) {\n            throw new Error(\n              \"Sorry, there are no images matching your search query. Please try again!\"\n            );\n           }\n          return res.json();\n        })\n        .catch(error => iziToast.error({message: `${error}`}));\n}\n\n    \n\n\n","export function createGallery(arrObjPicture) {\n   \n      return arrObjPicture.map(\n        ({\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        previewURL,\n        largeImageURL,\n      }) =>\n            `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${previewURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n      <div class = \"wrapper\">\n                 <div class = \"parameters\">\n                 <span class =\"title\">Likes</span>\n                 <span class = \"info\">${likes}</span>\n                 </div>\n                  <div class = \"parameters\">\n                 <span class =\"title\">Views</span>\n                 <span class = \"info\">${views}</span>\n                 </div>\n                  <div class = \"parameters\">\n                 <span class =\"title\">Comments</span>\n                 <span class = \"info\">${comments}</span>\n                 </div>\n                  <div class = \"parameters\">\n                 <span class =\"title\">Downloads</span>\n                 <span class = \"info\">${downloads}</span>\n                 </div>\n                 </div>\n</li>`).join(\"\");\n    }\n    \nexport function onLoading(element) {\n  console.log(\"reset style\", element);\n  element.style.display = 'block';\n  console.log(\"new style\", element.style.display);\n}\n\n\nexport function offLoading(element) {\n  element.style.display = 'none';\n}\n","import \"./css/styles.css\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { createGallery } from \"./js/render-functions\";\nimport { onLoading } from \"./js/render-functions\";\nimport { offLoading } from \"./js/render-functions\";\n\nconst BASE_URL = \"https://pixabay.com\";\nconst END_POINT = \"/api/\";\nconst keyUser = '43441081-c9c9daac9af91d4227dda2db1';\n\nlet currentPageNumber = 1;\nconst formData = {\n    keySearch: \"\",\n  };\n\nconst form = document.querySelector(\".feedback-form\");\nconst galleryNew = document.querySelector(\".list\");\nconst loader = document.querySelector(\".loader\");\nconst loaderbtn = document.querySelector(\".loaderbtn\");\nconst moreBtn = document.querySelector(\"button[data-more]\");\n// const kartaElement = document.querySelector(\".gallery-item\");\nform.addEventListener(\"input\", handleInput);\nform.addEventListener(\"submit\", handleSubmit);\nmoreBtn.addEventListener(\"click\", fitchPage);\n\noffLoading(loader);\noffLoading(loaderbtn);\n\n\n\n//++++++++++++++++++++++++++=======================\n\nfunction handleSubmit(event) {\n    currentPageNumber = 1;\n    galleryNew.innerHTML = \"\";\n   \n    formData.keySearch = event.target.keySearch.value;\n\n    \n     handleSubmitNew(event);\n    \n}\n\n\n//++++++++++++++++++++++++++++++=======================\nfunction fitchPage(event) {\n   \n    onLoading(loaderbtn);\n    currentPageNumber += 1;\n  \n      handleSubmitNew(event);\n\n    offLoading(loaderbtn);\n   }\n\n\n//++++++++++++++++++++++++++++++========================\n\n function handleInput(event) {\n   \n} \n\n\nfunction handleSubmitNew(event) {\n    event.preventDefault();\n    \n    if (currentPageNumber == 1) {\n        \n        galleryNew.innerHTML = \"\";\n    };\n        \n           onLoading(loader);\n  \n            if (formData.keySearch.trim() == \"\") {\n               offLoading(loader);\n               return iziToast.error({\n                   message: 'Sorry, there are no images matching your search query. Please try again!',\n                   position: 'bottomRight',\n                   messageColor: 'white',\n                   backgroundColor: 'red',\n                   progressBarColor: 'black',\n                 });\n             }\n  \n    getImages(keyUser, formData.keySearch, currentPageNumber)\n      .then(data => {\n           offLoading(loader);\n     \n           if (data.hits.length === 0) {   \n                offLoading(loader);\n                return iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'bottomRight',\n                messageColor: 'white',\n                backgroundColor: 'red',\n                progressBarColor: 'black',\n                    });\n                }  \n\n           galleryNew.insertAdjacentHTML(\"beforeend\", createGallery(data.hits));\n          gallery.refresh();\n          //+++++++++++++++++++================\n          const kartaElement = document.querySelector(\".gallery-item\");\n          const heightKarta = kartaElement.getBoundingClientRect()\n\n          console.log(\"Bounding:\", heightKarta.height);\n          window.scrollBy({\n              top: heightKarta.height * 2,\n                  //left: 100,\n                  behavior: \"smooth\",\n                });\n\n          //++++++++++++++++++=================\n          // form.reset();\n         //  formData.keySearch = '';\n       })\n      .catch(error => {\n           offLoading(loader);\n           iziToast.error({\n                message: `${error}`,\n           });\n       })\n      .finally(() => {\n          // form.reset();\n      });\n        \n    }  \n\n      \n   \n//+++++++++++++++++++++++++++++===================================\n\nlet gallery = new SimpleLightbox('.list a',\n    { \n        captionsData: \"alt\",\n        captionClass: \"text-center\",\n        captionDelay: 250,\n        overlayOpacity: 0.8,\n    });\n\ngallery.on('show.simplelightbox', function () {\n\t\n});\n\ngallery.on('error.simplelightbox', function (e) {\n\tconsole.log(e); \n});\n\n\n   "],"names":["BASE_URL","END_POINT","getImages","keyUser","keyImage","currentPageNumber","params","url","res","error","createGallery","arrObjPicture","tags","likes","views","comments","downloads","previewURL","largeImageURL","onLoading","element","offLoading","formData","form","galleryNew","loader","loaderbtn","moreBtn","handleInput","handleSubmit","fitchPage","event","handleSubmitNew","iziToast","data","gallery","heightKarta","SimpleLightbox"],"mappings":"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"}