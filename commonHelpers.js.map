{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\nconst BASE_URL = \"https://pixabay.com\";\nconst END_POINT = \"/api/\";\n\n export async function getImages(keyUser, keyImage, currentPageNumber, per_page) {\n        const params = new URLSearchParams({\n            key: keyUser,\n            q: keyImage,\n            image_type: \"photo\",\n            orientation: 'horizontal',\n          safesearch: 'true',\n          page: `${currentPageNumber}`,\n        //  per_page: 15,\n           per_page: per_page,\n        });\n   \n        const url = `${BASE_URL}${END_POINT}?${params}`;\n    \n        const res = await axios.get(url);\n                    return res.data;\n      \n}\n\n    \n\n\n","export function createGallery(arrObjPicture) {\n  console.log(\"totalHits\", arrObjPicture.totalHits);\n      return arrObjPicture.map(\n        ({\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        previewURL,\n        largeImageURL,\n        }) =>\n            `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${previewURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n      <div class = \"wrapper\">\n                 <div class = \"parameters\">\n                 <span class =\"title\">Likes</span>\n                 <span class = \"info\">${likes}</span>\n                 </div>\n                  <div class = \"parameters\">\n                 <span class =\"title\">Views</span>\n                 <span class = \"info\">${views}</span>\n                 </div>\n                  <div class = \"parameters\">\n                 <span class =\"title\">Comments</span>\n                 <span class = \"info\">${comments}</span>\n                 </div>\n                  <div class = \"parameters\">\n                 <span class =\"title\">Downloads</span>\n                 <span class = \"info\">${downloads}</span>\n                 </div>\n                 </div>\n</li>`).join(\"\");\n    }\n //+++++++++++++++++++++++++++======================   \nexport function onLoading(element) {\n \n  element.style.display = 'block';\n\n}\n\n//+++++++++++++++++++++++++++++++++++===============\nexport function offLoading(element) {\n  element.style.display = 'none';\n}\n","import \"./css/styles.css\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { createGallery } from \"./js/render-functions\";\nimport { onLoading } from \"./js/render-functions\";\nimport { offLoading } from \"./js/render-functions\";\n\nconst BASE_URL = \"https://pixabay.com\";\nconst END_POINT = \"/api/\";\nconst keyUser = '43441081-c9c9daac9af91d4227dda2db1';\n\nlet currentPageNumber = 1;\nconst formData = {\n    keySearch: \"\",\n};\nconst per_page = 15;\n\nconst form = document.querySelector(\".feedback-form\");\nconst galleryNew = document.querySelector(\".list\");\nconst loader = document.querySelector(\".loader\");\nconst loaderbtn = document.querySelector(\".loaderbtn\");\nconst loadermorebtn = document.querySelector(\".loadermorebtn\");\nconst moreBtn = document.querySelector(\"button[data-more]\");\nform.addEventListener(\"input\", handleInput);\nform.addEventListener(\"submit\", handleSubmit);\nmoreBtn.addEventListener(\"click\", fitchPage);\n\noffLoading(loader);\noffLoading(loaderbtn);\noffLoading(loadermorebtn);\n\n\n\n//++++++++++++++++++++++++++=======================\nfunction handleSubmit(event) {\n    currentPageNumber = 1;\n    galleryNew.innerHTML = \"\";\n   \n    formData.keySearch = event.target.keySearch.value;\n\n    // onLoading(loaderbtn);\n    handleSubmitNew(event);\n  }\n\n//++++++++++++++++++++++++++++++=======================\nfunction fitchPage(event) {\n   \n    onLoading(loaderbtn);\n    currentPageNumber += 1;\n  \n      handleSubmitNew(event);\n\n}\n\n//++++++++++++++++++++++++++++++========================\n function handleInput(event) {\n   \n} \n\n//++++++++++++++++++++++++++++++++++++=====================\nfunction handleSubmitNew(event) {\n    event.preventDefault();\n    \n    if (currentPageNumber == 1) {\n        \n        galleryNew.innerHTML = \"\";\n    };\n      \n           onLoading(loaderbtn);\n  \n            if (formData.keySearch.trim() == \"\") {\n               offLoading(loaderbtn);\n               return iziToast.error({\n                   message: 'Sorry, there is no search request. You must enter a keyword.',\n                   position: 'bottomRight',\n                   messageColor: 'white',\n                   backgroundColor: 'red',\n                   progressBarColor: 'black',\n                 });\n             }\n \n   //+++++++++++++++++=========================\n   \n    getImages(keyUser, formData.keySearch, currentPageNumber, per_page)\n      .then(data => {\n          offLoading(loaderbtn);\n          onLoading(loadermorebtn);\n         \n\n         \n          if (data.totalHits <= currentPageNumber * per_page && data.hits.length > 0) {\n            \n              offLoading(loadermorebtn);\n             \n              iziToast.error({\n                   message: \"We're sorry, but you've reached the end of search results.\",\n                   position: 'bottomRight',\n                   messageColor: 'white',\n                   backgroundColor: 'red',\n                   progressBarColor: 'black',\n                 });\n           \n          }\n\n         \n           if (data.hits.length === 0) {   \n              offLoading(loader);\n              offLoading(loadermorebtn);\n                return iziToast.error({\n                message: 'Sorry, there are no images matching your search query, or the search query is incorrect. Please try again!',\n                position: 'bottomRight',\n                messageColor: 'white',\n                backgroundColor: 'red',\n                progressBarColor: 'black',\n                    });\n                }  \n\n           galleryNew.insertAdjacentHTML(\"beforeend\", createGallery(data.hits));\n          gallery.refresh();\n          \n          const kartaElement = document.querySelector(\".gallery-item\");\n          const heightKarta = kartaElement.getBoundingClientRect()\n\n            window.scrollBy({\n              top: heightKarta.height * 2,\n              behavior: \"smooth\",\n                });\n\n                \n       })\n      .catch(error => {\n           offLoading(loader);\n           iziToast.error({\n                message: `${error}`,\n           });\n       })\n      .finally(() => {\n         \n      });\n        \n    }  \n\n//+++++++++++++++++++++++++++++===================================\n\nlet gallery = new SimpleLightbox('.list a',\n    { \n        captionsData: \"alt\",\n        captionClass: \"text-center\",\n        captionDelay: 250,\n        overlayOpacity: 0.8,\n    });\n\ngallery.on('show.simplelightbox', function () {\n\t\n});\n\ngallery.on('error.simplelightbox', function (e) {\n\tconsole.log(e); \n});\n\n\n   "],"names":["BASE_URL","END_POINT","getImages","keyUser","keyImage","currentPageNumber","per_page","params","url","axios","createGallery","arrObjPicture","tags","likes","views","comments","downloads","previewURL","largeImageURL","onLoading","element","offLoading","formData","form","galleryNew","loader","loaderbtn","loadermorebtn","moreBtn","handleInput","handleSubmit","fitchPage","event","handleSubmitNew","iziToast","data","gallery","heightKarta","error","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAW,sBACXC,EAAY,QAEV,eAAeC,EAAUC,EAASC,EAAUC,EAAmBC,EAAU,CACzE,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKJ,EACL,EAAGC,EACH,WAAY,QACZ,YAAa,aACf,WAAY,OACZ,KAAM,GAAGC,CAAiB,GAEzB,SAAUC,CACrB,CAAS,EAEKE,EAAM,GAAGR,CAAQ,GAAGC,CAAS,IAAIM,CAAM,GAGjC,OADA,MAAME,EAAM,IAAID,CAAG,GACR,IAE/B,CCtBO,SAASE,EAAcC,EAAe,CAC3C,eAAQ,IAAI,YAAaA,EAAc,SAAS,EACrCA,EAAc,IACnB,CAAC,CACD,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,WAAAC,EACA,cAAAC,CACC,IACG;AAAA,kCACsBA,CAAa;AAAA;AAAA;AAAA,aAGlCD,CAAU;AAAA,qBACFC,CAAa;AAAA,aACrBN,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAMuBC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,wCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,wCAIRC,CAAS;AAAA;AAAA;AAAA,MAG3C,EAAE,KAAK,EAAE,CACV,CAEE,SAASG,EAAUC,EAAS,CAEjCA,EAAQ,MAAM,QAAU,OAE1B,CAGO,SAASC,EAAWD,EAAS,CAClCA,EAAQ,MAAM,QAAU,MAC1B,CCvCA,MAAMjB,EAAU,qCAEhB,IAAIE,EAAoB,EACxB,MAAMiB,EAAW,CACb,UAAW,EACf,EACMhB,EAAW,GAEXiB,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAgB,SAAS,cAAc,gBAAgB,EACvDC,EAAU,SAAS,cAAc,mBAAmB,EAC1DL,EAAK,iBAAiB,QAASM,CAAW,EAC1CN,EAAK,iBAAiB,SAAUO,CAAY,EAC5CF,EAAQ,iBAAiB,QAASG,CAAS,EAE3CV,EAAWI,CAAM,EACjBJ,EAAWK,CAAS,EACpBL,EAAWM,CAAa,EAKxB,SAASG,EAAaE,EAAO,CACzB3B,EAAoB,EACpBmB,EAAW,UAAY,GAEvBF,EAAS,UAAYU,EAAM,OAAO,UAAU,MAG5CC,EAAgBD,CAAK,CACtB,CAGH,SAASD,EAAUC,EAAO,CAEtBb,EAAUO,CAAS,EACnBrB,GAAqB,EAEnB4B,EAAgBD,CAAK,CAE3B,CAGC,SAASH,EAAYG,EAAO,CAE7B,CAGA,SAASC,EAAgBD,EAAO,CAUpB,GATRA,EAAM,eAAc,EAEhB3B,GAAqB,IAErBmB,EAAW,UAAY,IAGpBL,EAAUO,CAAS,EAEdJ,EAAS,UAAU,KAAI,GAAM,GAC9B,OAAAD,EAAWK,CAAS,EACbQ,EAAS,MAAM,CAClB,QAAS,+DACT,SAAU,cACV,aAAc,QACd,gBAAiB,MACjB,iBAAkB,OACrC,CAAkB,EAKdhC,EAAUC,EAASmB,EAAS,UAAWjB,EAAmBC,CAAQ,EAC/D,KAAK6B,GAAQ,CAqBT,GApBDd,EAAWK,CAAS,EACpBP,EAAUQ,CAAa,EAInBQ,EAAK,WAAa9B,EAAoBC,GAAY6B,EAAK,KAAK,OAAS,IAErEd,EAAWM,CAAa,EAExBO,EAAS,MAAM,CACV,QAAS,6DACT,SAAU,cACV,aAAc,QACd,gBAAiB,MACjB,iBAAkB,OACrC,CAAkB,GAKHC,EAAK,KAAK,SAAW,EACtB,OAAAd,EAAWI,CAAM,EACjBJ,EAAWM,CAAa,EACfO,EAAS,MAAM,CACtB,QAAS,6GACT,SAAU,cACV,aAAc,QACd,gBAAiB,MACjB,iBAAkB,OAClC,CAAqB,EAGVV,EAAW,mBAAmB,YAAad,EAAcyB,EAAK,IAAI,CAAC,EACpEC,EAAQ,QAAO,EAGf,MAAMC,EADe,SAAS,cAAc,eAAe,EAC1B,sBAAuB,EAEtD,OAAO,SAAS,CACd,IAAKA,EAAY,OAAS,EAC1B,SAAU,QACxB,CAAiB,CAGjB,CAAQ,EACD,MAAMC,GAAS,CACXjB,EAAWI,CAAM,EACjBS,EAAS,MAAM,CACV,QAAS,GAAGI,CAAK,EACjC,CAAY,CACZ,CAAQ,EACD,QAAQ,IAAM,CAErB,CAAO,CAEF,CAIL,IAAIF,EAAU,IAAIG,EAAe,UAC7B,CACI,aAAc,MACd,aAAc,cACd,aAAc,IACd,eAAgB,EACxB,CAAK,EAELH,EAAQ,GAAG,sBAAuB,UAAY,CAE9C,CAAC,EAEDA,EAAQ,GAAG,uBAAwB,SAAU,EAAG,CAC/C,QAAQ,IAAI,CAAC,CACd,CAAC"}